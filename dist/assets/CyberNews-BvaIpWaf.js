import{r as o,j as t}from"./index-CQHFJ0Rx.js";function j(){const[c,d]=o.useState([]),[s,h]=o.useState(!0),[l,u]=o.useState(""),i=o.useCallback(async e=>{h(!0),u("");try{const r=await fetch("/api/cybernews",{signal:e});if(!r.ok)throw new Error(`HTTP ${r.status} ${r.statusText}`);const m=await r.json(),x=Array.isArray(m.articles)?m.articles:[],p=new Map;for(const n of x)p.set(n.url??n.title,n);const b=[...p.values()].sort((n,g)=>{const y=n.publishedAt?Date.parse(n.publishedAt):0;return(g.publishedAt?Date.parse(g.publishedAt):0)-y});d(b.slice(0,10))}catch(r){r.name!=="AbortError"&&u(r.message||"Unknown error"),d([])}finally{h(!1)}},[]);o.useEffect(()=>{const e=new AbortController;return i(e.signal),()=>e.abort()},[i]);const a=o.useMemo(()=>c.slice(0,5),[c]);return t.jsx("div",{className:"page",children:t.jsxs("div",{className:"wrap",style:{maxWidth:800,margin:"0 auto"},children:[t.jsxs("header",{style:{textAlign:"center",marginBottom:"1.25rem"},children:[t.jsx("h1",{style:{fontSize:"clamp(1.8rem, 1.2rem + 2.5vw, 3rem)",margin:0},children:"ðŸ“° Latest Cybersecurity News"}),t.jsx("p",{style:{color:"var(--text-muted)",marginTop:8},children:"Fresh headlines from around the web"}),t.jsx("div",{style:{marginTop:12},children:t.jsx("button",{className:"btn btn--ghost",onClick:()=>i(),disabled:s,"aria-disabled":s,children:s?"Refreshingâ€¦":"Refresh"})})]}),s&&t.jsx("div",{style:{padding:"1rem",textAlign:"center"},children:"Loading newsâ€¦"}),l&&t.jsxs("div",{style:{color:"red",padding:"1rem",textAlign:"center"},children:["Error: ",l]}),!s&&!l&&a.length===0&&t.jsx("div",{style:{padding:"1rem",textAlign:"center"},children:"No recent articles found."}),!s&&!l&&a.length>0&&t.jsx("ul",{className:"news-list",style:{listStyle:"none",padding:0,margin:0},children:a.map(e=>t.jsxs("li",{style:{marginBottom:"1.25rem",paddingBottom:"1rem",borderBottom:"1px solid var(--border)"},children:[t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"1rem",fontWeight:600,lineHeight:1.4,textDecoration:"underline",color:"hsl(240, 100%, 70%)",display:"block",marginBottom:"0.35rem"},children:e.title}),t.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--muted)",marginBottom:"0.4rem"},children:[e.source?.name||"Unknown source"," â€”"," ",e.publishedAt?new Date(e.publishedAt).toLocaleDateString():"Unknown date"]}),t.jsx("div",{style:{fontSize:"0.95rem",color:"var(--text)",opacity:.85,lineHeight:1.45},children:e.description?e.description.length>160?e.description.slice(0,160)+"â€¦":e.description:""})]},e.url||e.publishedAt||e.title))})]})})}export{j as default};
