import{r as b,j as t,u as C,a as $,b as z,L as w}from"./index-RebyCcmr.js";class f{constructor(s=0,r="Network Error"){this.status=s,this.text=r}}const O=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,s)=>Promise.resolve(localStorage.setItem(e,s)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},l={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:O()},S=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},W=(e,s="https://api.emailjs.com")=>{if(!e)return;const r=S(e);l.publicKey=r.publicKey,l.blockHeadless=r.blockHeadless,l.storageProvider=r.storageProvider,l.blockList=r.blockList,l.limitRate=r.limitRate,l.origin=r.origin||s},N=async(e,s,r={})=>{const o=await fetch(l.origin+e,{method:"POST",headers:r,body:s}),i=await o.text(),c=new f(o.status,i);if(o.ok)return c;throw c},L=(e,s,r)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!s||typeof s!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},q=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},T=e=>e.webdriver||!e.languages||e.languages.length===0,M=()=>new f(451,"Unavailable For Headless Browser"),D=(e,s)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof s!="string")throw"The BlockList watchVariable has to be a string"},V=e=>!e.list?.length||!e.watchVariable,G=(e,s)=>e instanceof FormData?e.get(s):e[s],P=(e,s)=>{if(V(e))return!1;D(e.list,e.watchVariable);const r=G(s,e.watchVariable);return typeof r!="string"?!1:e.list.includes(r)},E=()=>new f(403,"Forbidden"),J=(e,s)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(s&&typeof s!="string")throw"The LimitRate ID has to be a non-empty string"},Y=async(e,s,r)=>{const o=Number(await r.get(e)||0);return s-Date.now()+o},_=async(e,s,r)=>{if(!s.throttle||!r)return!1;J(s.throttle,s.id);const o=s.id||e;return await Y(o,s.throttle,r)>0?!0:(await r.set(o,Date.now().toString()),!1)},A=()=>new f(429,"Too Many Requests"),Q=async(e,s,r,o)=>{const i=S(o),c=i.publicKey||l.publicKey,a=i.blockHeadless||l.blockHeadless,u=i.storageProvider||l.storageProvider,h={...l.blockList,...i.blockList},n={...l.limitRate,...i.limitRate};return a&&T(navigator)?Promise.reject(M()):(L(c,e,s),q(r),r&&P(h,r)?Promise.reject(E()):await _(location.pathname,n,u)?Promise.reject(A()):N("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:c,service_id:e,template_id:s,template_params:r}),{"Content-type":"application/json"}))},U=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},X=e=>typeof e=="string"?document.querySelector(e):e,Z=async(e,s,r,o)=>{const i=S(o),c=i.publicKey||l.publicKey,a=i.blockHeadless||l.blockHeadless,u=l.storageProvider||i.storageProvider,h={...l.blockList,...i.blockList},n={...l.limitRate,...i.limitRate};if(a&&T(navigator))return Promise.reject(M());const g=X(r);L(c,e,s),U(g);const d=new FormData(g);return P(h,d)?Promise.reject(E()):await _(location.pathname,n,u)?Promise.reject(A()):(d.append("lib_version","4.4.1"),d.append("service_id",e),d.append("template_id",s),d.append("user_id",c),N("/api/v1.0/email/send-form",d))},F={init:W,send:Q,sendForm:Z,EmailJSResponseStatus:f},ee="a8SgF_0gBF06y_q-u",te="service_ir8ra3e",se="template_5k6caie";F.init(ee);function re(e){return e>=85?`
      â€¢ Maintain current security practices and stay updated
      â€¢ Consider advanced security measures for further improvement
      â€¢ Regular security awareness training for new employees
      â€¢ Implement continuous monitoring and testing
    `:e>=70?`
      â€¢ Strengthen authentication with MFA across all systems
      â€¢ Review and update security policies regularly
      â€¢ Conduct regular security awareness training
      â€¢ Implement comprehensive data backup solutions
    `:`
      â€¢ Implement basic security measures immediately
      â€¢ Set up multi-factor authentication
      â€¢ Create incident response plans
      â€¢ Establish regular security training programs
      â€¢ Review and upgrade access controls
    `}function ae({score:e,total:s}){const[r,o]=b.useState(""),[i,c]=b.useState(""),[a,u]=b.useState(!1),[h,n]=b.useState(!1),[g,d]=b.useState(""),m=Math.round(e/s*100),v=m>=85?"Strong":m>=70?"Good":m>=50?"Needs Improvement":"At Risk",x=async p=>{p.preventDefault(),u(!0),d("");try{const j=m>=85?"Low":m>=70?"Moderate":"High",K=m>=85?"â‰ˆ30 days":m>=70?"â‰ˆ60 days":"â‰ˆ90 days",H=m>=85?"$0.5Kâ€“2K":m>=70?"$2Kâ€“8K":"$8Kâ€“20K",I=m>=85?"Top 10%":m>=67?"Above Average":"Below Average",B={to_email:r,company_name:i,score:e,total:s,percentage:m,verdict:v,date:new Date().toLocaleDateString(),risk_level:j,implementation_window:K,investment_range:H,ranking:I,recommendations:re(m),to_name:i};(await F.send(te,se,B)).status===200?n(!0):d("Failed to send email. Please try again.")}catch(j){console.error("Error sending email:",j),d("Failed to send email. Please try again.")}finally{u(!1)}};return h?t.jsxs("div",{className:"email-success",children:[t.jsx("h3",{children:"Thank you!"}),t.jsxs("p",{children:["Your results have been sent to ",r]}),t.jsx("p",{className:"success-detail",children:"Please check your inbox for the detailed report."})]}):t.jsxs("div",{className:"email-capture",children:[t.jsx("h3",{children:"Get Your Results by Email"}),t.jsx("p",{className:"email-subtitle",children:"We'll send you a detailed report with personalized recommendations for improvement."}),t.jsxs("form",{onSubmit:x,className:"email-form",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"company",children:"Company Name"}),t.jsx("input",{type:"text",id:"company",value:i,onChange:p=>c(p.target.value),required:!0,placeholder:"Your company name",disabled:a})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"email",children:"Email Address"}),t.jsx("input",{type:"email",id:"email",value:r,onChange:p=>o(p.target.value),required:!0,placeholder:"you@company.com",disabled:a})]}),g&&t.jsx("div",{className:"error-message",children:g}),t.jsx("button",{type:"submit",className:"submit-btn",disabled:a,children:a?"Sending...":"Send My Results"})]})]})}function ce(){C();const e=$(),[s]=z(),r=e.state?.answers??null,o=e.state?.score??null,i=e.state?.total??null,c=s.get("score"),a=s.get("total"),u=Number(o??c??NaN),h=Number(i??a??NaN),n=Number.isFinite(u)&&Number.isFinite(h)&&h>0?Math.round(u/h*100):null,g=n==null?"Getting Started":n>=85?"Strong":n>=70?"Good":n>=50?"Needs Improvement":"At Risk",d=b.useMemo(()=>{if(!r)return null;const m=Object.values(r).filter(p=>p?.tag==="best").length,v=Object.values(r).filter(p=>p?.tag==="iffy").length,x=Object.values(r).filter(p=>p?.tag==="bad").length;return{best:m,iffy:v,bad:x}},[r]);return b.useEffect(()=>{if(n!=null&&n>=85)try{ie(3e3)}catch{}},[n]),t.jsxs("section",{style:{padding:16},children:[t.jsx("h2",{style:{marginTop:0},children:"Security Assessment Results"}),n!=null?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:20,marginBottom:20,flexWrap:"wrap"},children:[t.jsx(ne,{value:n}),t.jsxs("div",{style:{minWidth:220},children:[t.jsxs("div",{style:{fontSize:18,fontWeight:700,marginBottom:6},children:["Overall: ",g]}),t.jsxs("div",{style:{fontSize:14,opacity:.8},children:["You scored ",t.jsx("strong",{children:u})," out of ",t.jsx("strong",{children:h}),"."]})]})]}):t.jsx("p",{children:"No results were provided. Please retake the assessment."}),n!=null&&t.jsxs("div",{style:{background:"var(--panel)",border:"1px solid var(--border-color)",borderRadius:12,padding:16,marginBottom:20},children:[t.jsx("h3",{style:{margin:"0 0 12px 0"},children:"ðŸ“‹ Executive Summary"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12},children:[t.jsx(y,{label:"Risk Level",value:n>=85?"Low":n>=70?"Moderate":"High"}),t.jsx(y,{label:"Implementation Window",value:n>=85?"â‰ˆ30 days":n>=70?"â‰ˆ60 days":"â‰ˆ90 days"}),t.jsx(y,{label:"Investment Range",value:n>=85?"$0.5Kâ€“2K":n>=70?"$2Kâ€“8K":"$8Kâ€“20K"}),t.jsx(y,{label:"Ranking",value:n>=85?"Top 10%":n>=67?"Above Avg":"Below Avg"})]})]}),r&&d&&t.jsxs("div",{style:{background:"var(--panel)",border:"1px solid var(--border-color)",borderRadius:12,padding:16,marginBottom:20},children:[t.jsx("h3",{style:{margin:"0 0 12px 0"},children:"ðŸ“Š Breakdown"}),t.jsxs("ul",{style:{margin:0,paddingLeft:18,lineHeight:1.8},children:[t.jsxs("li",{children:["ðŸŸ¢ Strong answers: ",t.jsx("strong",{children:d.best})]}),t.jsxs("li",{children:["ðŸŸ  Partial answers: ",t.jsx("strong",{children:d.iffy})]}),t.jsxs("li",{children:["ðŸ”´ Gaps: ",t.jsx("strong",{children:d.bad})]})]}),t.jsx("p",{className:"muted",style:{marginTop:8,fontSize:".9rem"},children:"Tip: Tackle ðŸ”´ gaps first, then upgrade ðŸŸ  to ðŸŸ¢."})]}),n!=null&&t.jsx(ae,{score:u,total:h}),t.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",marginTop:24},children:[t.jsx("button",{className:"navlink",style:k,onClick:()=>window.print(),children:"Download Report PDF"}),t.jsx(w,{to:"/quiz",className:"navlink",style:R,children:"Retake Assessment"}),t.jsx(w,{to:"/resources",className:"navlink",style:R,children:"Improve with Resources"})]}),n==null&&t.jsx("div",{style:{marginTop:16},children:t.jsx(w,{to:"/quiz",className:"navlink",style:k,children:"Start Assessment"})})]})}function ne({value:e}){const r=`hsl(${Math.max(0,Math.min(120,Math.round(e/100*120)))} 85% 55%)`;return t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:64,fontWeight:900,lineHeight:1,color:r},children:[e,"%"]}),t.jsx("div",{style:{width:240,height:10,background:"color-mix(in oklab, var(--text-color) 10%, transparent)",borderRadius:999,border:"1px solid color-mix(in oklab, var(--text-color) 18%, transparent)",overflow:"hidden",marginTop:8},children:t.jsx("div",{style:{width:`${e}%`,height:"100%",background:`linear-gradient(90deg, hsl(0 85% 55%), ${r})`,boxShadow:"0 0 12px var(--glow-soft)"}})}),t.jsx("p",{style:{margin:"6px 0 0 0",fontSize:12,opacity:.7},children:"0 = red, 50 = orange, 70 = yellow, 85+ = green ðŸŽ‰"})]})}function y({label:e,value:s}){return t.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:10,padding:12,background:"rgba(255,255,255,0.02)"},children:[t.jsx("div",{style:{fontSize:12,opacity:.7,marginBottom:6},children:e}),t.jsx("div",{style:{fontSize:18,fontWeight:700},children:s})]})}const k={display:"inline-block",padding:"10px 14px",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"linear-gradient(180deg,#1f2a44,#18233a)",color:"white",fontWeight:600,textDecoration:"none"},R={...k,background:"transparent",border:"1px solid rgba(255,255,255,.25)"};function ie(e=2500){const s=document.createElement("div");Object.assign(s.style,{position:"fixed",inset:"0",pointerEvents:"none",zIndex:"2147483647",overflow:"hidden"}),document.body.appendChild(s);const r=["#7c5cff","#5cc8ff","#ffb02e","#4caf50","#ef5350"];let o;const i=Array.from({length:120}).map(()=>{const a=document.createElement("i"),u=6+Math.random()*8;return Object.assign(a.style,{position:"absolute",width:`${u}px`,height:`${u*1.4}px`,left:`${Math.random()*100}vw`,top:"-10px",background:r[Math.floor(Math.random()*r.length)],transform:`rotate(${Math.random()*360}deg)`,opacity:String(.7+Math.random()*.3),borderRadius:Math.random()>.5?"50%":"2px"}),s.appendChild(a),{el:a,y:-10,x:Math.random()*window.innerWidth,vy:2+Math.random()*3.5,vx:-1+Math.random()*2,rot:Math.random()*360,vr:-3+Math.random()*6}}),c=()=>{i.forEach(a=>{a.vy+=.02,a.y+=a.vy,a.x+=a.vx,a.rot+=a.vr,a.el.style.transform=`translate(${a.x}px, ${a.y}px) rotate(${a.rot}deg)`}),o=requestAnimationFrame(c)};c(),setTimeout(()=>{cancelAnimationFrame(o),s.remove()},e)}export{ce as default};
